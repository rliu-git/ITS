<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Math test</title>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            margin: 30px;
        }

        #quiz-container {
            max-width: 900px;
            margin: auto;
        }

        h1 {
            text-align: center;
        }

        #question {
            margin-bottom: 20px;
        }

        .options {
            list-style-type: none;
            padding: 0;
        }

        .options li {
            margin-bottom: 10px;
        }

        #feedback {
            margin-top: 20px;
            text-align: center;
        }

        #resultChart {
            display: block;
            margin: auto;
            margin-top: 20px; /* Adjust the top margin if needed */
        }

        #selectQuestionButton,
        #nextQuestionButton,
        #resetButton {
            display: block;
            margin: auto;
            margin-top: 20px;
            padding: 10px;
            background-color: #007BFF;
            color: #fff;
            cursor: pointer;
            border: none;
            border-radius: 5px;
        }

        #resetButton {
            display: none; /* Initially hidden */
        }
    </style>
</head>
<body>
    <div id="quiz-container">
        <h1>Math Test</h1>
        <div id="question"></div>
        <ul class="options" id="options"></ul>
        <div id="feedback"></div>
        <button id="selectQuestionButton" onclick="SelectQuestion()">Select Question</button>
        <button id="nextQuestionButton" style="display: none;" onclick="nextQuestion()">Next Question</button>
        <button id="resetButton" onclick="resetQuiz()">Reset Quiz</button>
    </div>
    <canvas id="resultChart" width="250" height="250"></canvas>

    <script>
        let selectedSkill;
        let skillButtonsDisplayed = false;

        const skill1Questions = [
            {
                question: "Skill 1 - What is the result of 3 + 3?",
                options: ["5", "6", "7", "8"],
                correctAnswer: "6"
            },
            {
                question: "What is the result of 12 + 2?",
                options: ["13", "14", "15", "16"],
                correctAnswer: "14"
            },
            {
                question: "What is the square root of 25?",
                options: ["3", "4", "5", "6"],
                correctAnswer: "5"
            },
            {
                question: "Which number is even?",
                options: ["2", "3", "5", "7"],
                correctAnswer: "2"
            },
            {
                question: "Which number is odd ?",
                options: ["2", "4", "5", "0"],
                correctAnswer: "5"
            },
            // Add more skill 1 questions as needed
        ];

        const skill2Questions = [
            {
                question: "Skill 2 - What is the result of 4 * 5?",
                options: ["16", "18", "20", "22"],
                correctAnswer: "20"
            },
            {
                question: "Skill 2 - What is the result of 40 * 5?",
                options: ["16", "18", "200", "22"],
                correctAnswer: "200"
            },
            {
                question: "Skill 2 - What is the result of 4 * 50?",
                options: ["16", "18", "200", "22"],
                correctAnswer: "200"
            },
            {
                question: "Skill 2 - What is the result of 5 * 5?",
                options: ["16", "18", "20", "25"],
                correctAnswer: "25"
            },
            {
                question: "Skill 2 - What is the result of 14 * 5?",
                options: ["16", "18", "60", "22"],
                correctAnswer: "60"
            },
            // Add more skill 2 questions as needed
        ];
        const skill3Questions = [
            // Add questions for Skill 3
            {
                question: "Skill 3 - What is the result of 7 * 8?",
                options: ["42", "54", "56", "64"],
                correctAnswer: "56"
            },
            {
                question: "Skill 3 - What is the result of 9 + 6?",
                options: ["13", "14", "15", "16"],
                correctAnswer: "15"
            },
            {
                question: "Skill 3 - What is the result of 9 + 1?",
                options: ["13", "14", "10", "16"],
                correctAnswer: "10"
            },
            {
                question: "Skill 3 - What is the result of 9 + 8?",
                options: ["13", "14", "15", "17"],
                correctAnswer: "17"
            },
            {
                question: "Skill 3 - What is the result of 9 + 7?",
                options: ["13", "14", "15", "16"],
                correctAnswer: "16"
            },
            // Add more skill 3 questions as needed
        ];
        let questions = [];
        
        function SelectQuestion() {
            selectedSkill = prompt("Enter the skill number (1, 2, or 3):");
            if (selectedSkill === "1") {
                questions = [...skill1Questions];
            } else if (selectedSkill === "2") {
                questions = [...skill2Questions];
            } else if (selectedSkill === "3") {
                questions = [...skill3Questions];
            } else {
                alert("Invalid skill number. Please enter 1, 2, or 3.");
                return;
            }

            skillButtonsDisplayed = true;
            currentQuestionIndex = 0;
            incorrectCount = 0;
            loadQuestion();
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                const selectedAnswer = document.querySelector('input[name="answer"]:checked');
                if (selectedAnswer) {
                    const answer = selectedAnswer.value;
                    const currentQuestion = questions[currentQuestionIndex];

                    if (answer !== currentQuestion.correctAnswer) {
                        incorrectCount++;
                    }
                }
                currentQuestionIndex++;
                loadQuestion();
            } else {
                displayResult();
            }
        }

        function loadQuestion() {
            const questionContainer = document.getElementById("question");
            const optionsList = document.getElementById("options");
            const selectQuestionButton = document.getElementById("selectQuestionButton");
            const nextQuestionButton = document.getElementById("nextQuestionButton");

            if (!skillButtonsDisplayed) {
                questionContainer.innerHTML = "Choose a exercise: exercise 1, 2, 3";
                optionsList.innerHTML = "";

                selectQuestionButton.style.display = "block";
                nextQuestionButton.style.display = "none";
            } else {
                questionContainer.innerHTML = questions[currentQuestionIndex].question;
                optionsList.innerHTML = "";

                questions[currentQuestionIndex].options.forEach((option, index) => {
                    const li = document.createElement("li");
                    li.innerHTML = `<input type="radio" name="answer" value="${option}" id="option${index + 1}" onchange="checkAnswer()">
                                            <label for="option${index + 1}">${option}</label>`;
                    optionsList.appendChild(li);
                });

                selectQuestionButton.style.display = "none";
                nextQuestionButton.style.display = "block";
            }

            document.getElementById("feedback").innerHTML = "";
        }

        function checkAnswer() {
            const selectedAnswer = document.querySelector('input[name="answer"]:checked');
            if (selectedAnswer) {
                const answer = selectedAnswer.value;
                const currentQuestion = questions[currentQuestionIndex];

                if (answer === currentQuestion.correctAnswer) {
                    document.getElementById("feedback").innerHTML = "Correct!";
                } else {
                    document.getElementById("feedback").innerHTML = "Incorrect. The correct answer is " + currentQuestion.correctAnswer + ".";
                }
            } else {
                document.getElementById("feedback").innerHTML = "Please select an answer.";
            }
        }

        function displayResult() {
    const correctCount = questions.length - incorrectCount;
    const nextQuestionButton = document.getElementById("nextQuestionButton");
    const resetButton = document.getElementById("resetButton");

    nextQuestionButton.style.display = "none";
    resetButton.style.display = "block"; // Display the reset button

    document.getElementById("question").innerHTML = "Test Completed!";
    document.getElementById("options").innerHTML = "";
    document.getElementById("feedback").innerHTML = `Correct: ${correctCount} | Incorrect: ${incorrectCount}`;

    const resultChartCanvas = document.getElementById("resultChart");
    const resultChartContext = resultChartCanvas.getContext("2d");

    new Chart(resultChartContext, {
        type: "pie",
        data: {
            labels: ["Correct", "Incorrect"],
            datasets: [{
                data: [correctCount, incorrectCount],
                backgroundColor: ["green", "red"],
            }],
        },
        options: {
            title: {
                display: true,
                text: 'Test Results',
                fontSize: 16,
            },
            legend: {
                display: true,
                position: 'bottom',
            },
        },
    });
}

        // Add this function to reset the quiz
        function resetQuiz() {
    skillButtonsDisplayed = false;
    incorrectCount = 0;

    const resultChartCanvas = document.getElementById("resultChart");

    // Destroy the existing chart (if any)
    Chart.getChart(resultChartCanvas)?.destroy();

    // Clear the canvas
    const resultChartContext = resultChartCanvas.getContext("2d");
    resultChartContext.clearRect(0, 0, resultChartCanvas.width, resultChartCanvas.height);

    document.getElementById("resetButton").style.display = "none";
    SelectQuestion();
}

        window.onload = loadQuestion;
    </script>
</body>
</html>

